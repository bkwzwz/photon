diff --git a/sqlite3.c b/sqlite3.c
index 1071ab9..44aee96 100644
--- a/sqlite3.c
+++ b/sqlite3.c
@@ -130633,7 +130633,7 @@ static int selectExpander(Walker *pWalker, Select *p){
 
   /* Process NATURAL keywords, and ON and USING clauses of joins.
   */
-  if( db->mallocFailed || sqliteProcessJoin(pParse, p) ){
+  if( pParse->nErr || db->mallocFailed || sqliteProcessJoin(pParse, p) ){
     return WRC_Abort;
   }
 
